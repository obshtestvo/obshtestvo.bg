{% extends "layout.html" %}
{% load staticfiles %}
{% load url from future %}
{% load restful %}

{% block content %}
    {% include '_masthead_sample.html' %}

    <section class="content">
        <nav class="nav-tabs basic-transition-2x">
            <ul class="stripped clearfix">
                <li><a class="selected" href="">Участници</a></li>
                <li><a href="#">Юридическа сила</a></li>
                <li><a href="#">Оборудване</a></li>
                <li><a href="#">Място</a></li>
                <li><a href="#">Публичност</a></li>
                <li><a href="#">Експертиза</a></li>
                <li><a href="#">Вдъхновение</a></li>
            </ul>
        </nav>
        <section class="users">
            <aside class="filter basic-transition-2x">
                <form class="small" action="">
                    <ul class="stripped filter-simple">
                        <li class="label"><label for="check-users-free">Само тези на разположение</label></li>
                        <li>
                            <input class="checkbox" type="checkbox" id="check-users-free" checked />
                            <label class="checkbox" for="check-users-free">custom checkbox</label>
                        </li>
                        <li class="label"><label for="check-category">Покажи в категории спрямо дейност</label></li>
                        <li>
                            <input class="checkbox" type="checkbox" id="check-category" />
                            <label class="checkbox" for="check-category">custom checkbox</label>
                        </li>
                    </ul>
                    <div class="filter-advanced">
                        <label for="joinSkills">
                            <h3 class="title-primary">Интерес към проекти:</h3>
                            <h4 class="title-info">Намерете човек спрямо интереса му към дадени проекти</h4>
                        </label>
                        <select name="project" id="userProject" style="width:100%" class="project">
                            <option value=""></option>
                            {% for project in projects %}
                                <option value="{{ project.id }}">&bdquo;{{ project.name }}&ldquo;</option>
                            {% endfor %}
                        </select>
                        <div class="users-free">
                            Участници неизбрали проекти
                            <input class="checkbox checkbox-second" type="checkbox" id="check-users-noprojects" />
                            <label class="checkbox checkbox-second" for="check-users-noprojects">custom checkbox</label>
                        </div>

                        <label for="joinSkills">
                            <h3 class="title-primary">Избрани дейности:</h3>
                            <h4 class="title-info">Намерете човек според дейността, в която иска да се включи</h4>
                        </label>
                        <input type="hidden" id="joinSkills" name="skills" style="width:100%" value="" data-choices="{{ skills_options|jsonify }}"/>
                    </div>
                </form>
            </aside>
            <section class="list basic-transition-2x">
            {% spaceless %}
                <ul class="stripped users-list">
                    {% for u in users %}
                    <li class="user-preview"
                        data-is-available="{% if u.is_currently_available %}1{% else %}0{% endif %}"
                        data-project-count="{{ u.projects_interests.count }}"
                    >

                        <h2 class="user-names">{{ u.first_name }} {{ u.last_name }}</h2>
                        <div class="avatar">
                            <figure>
                                <a href="#" class="round"><img src="{{ u.get_avatar }}?width=86&height=86" alt="" /></a>
                            </figure>
                            <a href="#" class="button standard blue">попитай</a>
                        </div>
                        <div class="user-skills">
                            <ul class="stripped">
                                {% for s in u.skills.all %}
                                    <li data-name="{{ s.name }}" data-id="{{ s.pk }}"><a href="">{{ s.name }}</a></li>
                                {% endfor %}
                            </ul>
                            {% if u.skills.count > 3 %}
                                <a class="more-activities" href="#">и още {{  u.skills.count|add:"-3" }} {% if u.skills.count > 4 %}дейности{% else %}дейност{% endif %}</a>
                            {% endif  %}
                        </div>
                        {% if u.projects_interests.count == 0 %}
                            <h6 class="no-projects">няма избрани проекти</h6>
                        {% else %}
                        <ol class="stripped user-projects clearfix">
                            {% for p in u.projects_interests.all %}
                                <li data-name="{{ p.name }}"
                                    data-id="{{ p.id }}"
                                    class="hint--info hint--top {% if forloop.counter > 3 %}hidden{% endif %}"
                                    data-hint="{{ p.name }}">
                                    <a href="#">
                                        <img src="{% if p.logo_thumb %}{{ p.get_logo_thumb }}{% else %}{% static 'img/nologo-thumb.png'%}{% endif %}" alt="" />
                                    </a>
                                </li>
                            {% endfor %}
                        </ol>
                        {% endif %}
                        {% if u.projects_interests.count > 3 %}
                            <a class="bulky more" href="#">още</a>
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
            {% endspaceless %}
                {% include '_footer.html' %}
                {% verbatim %}
                    <script id="popupTemplate" type="x-tmpl-mustache">
                        <section class="user-popup round closed">
                            <a class="close-popup" href="#nogo">&#x2715;</a>
                            <h2 class="user-names">{{ name }}</h2>
                            <div class="avatar">
                                <figure>
                                    <a href="#"><img src="{{ avatar }}" alt="" /></a>
                                </figure>
                                <a href="#" class="button standard blue">попитай</a>
                            </div>
                            <div class="user-desription">
                                {{ desc }}
                            </div>
                            <ul class="activities-all stripped">
                                {{#skills}}
                                <li>{{name}}</li>
                                {{/skills}}
                            </ul>
                            <ol class="stripped user-projects">
                                {{#projects}}
                                <li data-id="{{id}}">
                                    <a href="#">
                                        <img src="{{logo}}" alt="" />
                                        {{name}}
                                    </a>
                                </li>
                                {{/projects}}
                            </ol>
                        </section>
                    </script>
                {% endverbatim %}
            </section>
        </section>
    </section>
{% endblock %}

{% block headTag %}
    {#    Тук се добавят допълнителни CSS файлове по примера на долния ред #}
    <link rel="stylesheet" type="text/css" href="{% static 'css/lib/select2/select2.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/lib/select2/select2.css' %}">
    {#    Горния ред търси във всяка папка на горно ниво в проекта (auth, locale, login, projects..) файл вътре в нея #}
    {#    за файл вътре в нея "static/css/lib/select2/select2.css" #}
{% endblock %}

{% block footer %}
{% endblock %}

{% block footerTag %}
    <script src="{% static 'libs/mustache/mustache.js' %}"></script>
    <script src="{% static 'js/lib/select2/select2.mod.min.js' %}"></script>
    <script src="{% static 'js/select2grouped.js' %}"></script>
    <script src="{% static 'js/lib/select2/select2_locale_bg.js' %}"></script>
    <script src="{% static 'libs/mixitup/build/jquery.mixitup.min.js' %}"></script>
    <script src="{% static 'libs/packery/dist/packery.pkgd.min.js' %}"></script>
    {#    Тук се добавят допълнителни javascript файлове по примера на долния ред #}
    <script src="{% static 'js/users.js' %}"></script>
    {#    Горния ред търси във всяка папка на горно ниво в проекта (auth, locale, login, projects..) файл вътре в нея #}
    {#    за файл вътре в нея "static/js/users.js" #}
{% endblock %}
